<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resumen</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>Resumen</h1>
    <button class="back-button" onclick="history.back()">← Atrás</button>
  </header>
  <main>
    <div id="resumen-container"></div>
  </main>
  <script src="storage.js"></script>
<script>
  const resumen = document.getElementById('resumen-container');
  const productos = cargarProductos();
  const porSub = {};

  productos.forEach(p => {
    if (!porSub[p.sub]) porSub[p.sub] = [];
    porSub[p.sub].push(p);
  });

  for (const sub in porSub) {
    const div = document.createElement('section');
    div.innerHTML = `<h2>${sub}</h2>`;
    porSub[sub].forEach(p => {
      const item = document.createElement('div');
      let texto = `${p.nombre} (${p.bulto} por bulto)`;
      if (p.cantidad) {
        const bultos = Math.floor(p.cantidad / p.bulto);
        const resto = p.cantidad % p.bulto;
        texto += ` - Necesitás ${bultos} bultos y sobran ${resto}`;
      }
      item.innerText = texto;
      div.appendChild(item);
    });
    resumen.appendChild(div);
  }
</script>
</body>
</html>